<ng-container *ngIf="dataFromStore$ | async as dataFromStore">

    <div class="mb-2">
        <mat-tab-group (selectedTabChange)="onTabChange($event)">
            <mat-tab label="Korisnici na projektu"></mat-tab>
            <mat-tab label="Prijavljeni korisnici"></mat-tab>
            <mat-tab label="Pozovite saradnike">
                Pozovite korisnike po vašem izboru
                <br>
                komponenta
                <br>
                Ili pozovite predložene korisnike da se pridruže na projekat
                <mat-icon fontIcon="info" class="ms-2 text-green cursor-pointer" 
                              matTooltip="Ovde se nalaze korisnici koji imaju barem jednu od potrebnih veština za projekat
                              i najbolje se slažu sa vama po izabranim osobinama. Ukoliko nema predloženih korisnika
                              proverite da li ste uneli vaše osobine. Idite na svoj profil, zatim na 'Izmeni osobine'
                              , popunite formu i sačuvajte.">
                </mat-icon>
            </mat-tab>
            <mat-tab label="Pozivnice na čekanju"></mat-tab>
        </mat-tab-group>
    </div>

    <mat-spinner diameter="50" *ngIf="dataFromStore.isLoading" class="mx-auto"></mat-spinner>

    <ng-container *ngIf="!dataFromStore.isLoading">
        <p class="lead text-center mt-4" *ngIf="!dataFromStore.users?.length">Nema korisnika</p>
        <div class="row d-flex align-items-center justify-content-center w-100" *ngFor="let user of dataFromStore.users">
            <div class="col-md-10">
                <app-user-preview class="w-100" [user]="user"></app-user-preview>
            </div>
            <div class="col-md-2 d-flex justify-content-end justify-content-md-center">
                <button class="btn btn-sm bg-green text-beige" *ngIf="selectedParticipantsView === 'applied'">
                    <mat-icon fontIcon="check" (click)="acceptUserInProject(user.id)"></mat-icon>
                </button>
                <button class="btn btn-sm bg-red text-beige ms-2" >
                    <mat-icon fontIcon="remove" (click)="unenrollUserFromProject(user.id)"></mat-icon>
                </button>
            </div>
        </div>
    </ng-container>

    <mat-paginator *ngIf="dataFromStore.users?.length > 0"
        class="mt-3"
        [length]="dataFromStore.paginationMetadata.totalItems" 
        [pageSize]="dataFromStore.paginationMetadata.itemsPerPage" 
        [pageSizeOptions]="[5, 10, 25, 50]" 
        [showFirstLastButtons]="true"
        (page)="onPaginateChange($event)">
    </mat-paginator>

</ng-container>